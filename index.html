<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NTAG Video</title>
<style>
  body, html { margin:0; padding:0; height:100%; background:black; }
  #videoContainer { display:none; width:100%; height:100%; justify-content:center; align-items:center; }
  video { width:100%; height:100%; object-fit:cover; }
  #finger { position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); padding:20px; background:white; cursor:pointer; }
</style>
</head>
<body>

<div id="finger">Toca aqu铆</div>

<div id="videoContainer">
  <video id="video" loop>
    <source src="video.mp4" type="video/mp4">
    Tu navegador no soporta v铆deo.
  </video>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => { // 锔 Espera que el DOM cargue
    const finger = document.getElementById("finger");
    const container = document.getElementById("videoContainer");
    const video = document.getElementById("video");

    finger.addEventListener("click", () => {

        // Vibraci贸n
        if (navigator.vibrate) navigator.vibrate([300, 100, 300, 100, 500]);

        // Mostrar contenedor
        container.style.display = "flex";
        finger.style.display = "none"; // Ocultar bot贸n

        // V铆deo muted para autoplay
        video.muted = true;
        video.currentTime = 0;

        video.play().catch(err => console.warn("Autoplay bloqueado:", err));

        // Bot贸n para activar sonido
        if (!document.getElementById("soundBtn")) {
            const soundBtn = document.createElement("button");
            soundBtn.id = "soundBtn";
            soundBtn.innerText = " Activar sonido";
            soundBtn.style.position = "fixed";
            soundBtn.style.top = "20px";
            soundBtn.style.left = "50%";
            soundBtn.style.transform = "translateX(-50%)";
            soundBtn.style.padding = "10px 20px";
            soundBtn.style.fontSize = "18px";
            document.body.appendChild(soundBtn);

            soundBtn.addEventListener("click", () => {
                video.muted = false;
                video.play();
                soundBtn.remove();
            });
        }

        // Fullscreen al tocar el v铆deo
        video.addEventListener("click", () => {
            const fsFunc = video.requestFullscreen || video.webkitRequestFullscreen || video.msRequestFullscreen;
            if (fsFunc) fsFunc.call(video).catch(e => console.warn("Fullscreen fall贸:", e));
        });

        // Bloqueo parcial bot贸n atr谩s 60s
        history.pushState(null, "", location.href);
        const lockUntil = Date.now() + 60000;
        const blocker = setInterval(() => {
            if (Date.now() < lockUntil) history.pushState(null, "", location.href);
            else clearInterval(blocker);
        }, 100);

    });
});
</script>

</body>
</html>
